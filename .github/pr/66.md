# lua: simplify main, use preload for modules

This PR merges the lua-simplify-main branch, which removes custom command-line options and converts auto-loaded modules to use Lua's preload mechanism.

## Changes

- **third_party/lua/lua.main.c** - Removed `--skill` and `--embed` command-line options. These features are now accessible via explicit module loading (e.g., `lua -e 'require("cosmo.skill").install()'`). Converted `unix` and `cosmo` modules from auto-loaded globals to preloaded modules that require explicit `require()` calls.

## Motivation

This simplifies the Lua interpreter by aligning it more closely with upstream Lua 5.4.6 conventions. Modules are now opt-in via `require()` rather than automatically injected into the global scope, which:

- Reduces startup overhead for scripts that don't need these modules
- Makes dependencies more explicit in scripts
- Aligns with standard Lua practices
- Maintains all functionality while simplifying the codebase

## Migration

Scripts that relied on auto-loaded modules will need to add explicit require statements:

```lua
local unix = require("unix")
local cosmo = require("cosmo")
```

Scripts using `--skill` or `--embed` should call the modules directly:

```lua
lua -e 'require("cosmo.skill").install()'
lua -e 'require("cosmo.embed").install("package")'
```

## Validation

- [x] Merged lua-simplify-main branch cleanly
- [x] Changes pushed to remote branch
